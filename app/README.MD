# Техническое задание (ТЗ) на мобильное приложение для сканирования QR-кодов

## **1. Назначение и общая цель приложения**

Мобильное приложение предназначено для сканирования QR-кодов с возможностью сохранения, отображения, инвентаризации и отправки отсканированных данных в различные форматы (Excel, 1С). Приложение реализовано под платформу Android с использованием языка Java и архитектуры MVVM.

---

## **2. Основные функции приложения**

### **2.1. Главное окно**
- Содержит три кнопки:
  - **Прочитать** — открывает окно сканирования QR-кодов.
  - **Инвентаризация** — открывает меню выбора типа инвентаризации.
  - **Отправить** — открывает меню отправки данных.

### **2.2. Окно "Прочитать" (сканирование QR-кода)**

##### **Функционал:**
- Включение камеры для сканирования QR-кодов.
- **Реквизиты интерфейса:**
  - **Зумер камеры** — масштабирование изображения с камеры.
  - **Сканер** — область для захвата QR-кода.
  - **Фонарь (вспышка)** — включение/выключение фонарика.
  - **Поворот камеры** — переключение между передней и задней камерой.
  - **Режим сканирования:**
    - **Обычный** — сканирование одного QR-кода, после чего открывается окно с результатом.
    - **Пакетный** — возможность сканирования нескольких QR-кодов подряд с сохранением в список.

##### **После сканирования:**
- Переход на окно **списка отсканированных данных**.

### **2.3. Окно "Список отсканированных данных"**
- Отображение списка QR-кодов (их значений), отсканированных в текущей сессии.
- Возможность удаления отдельных записей.
- Кнопка возврата в главное меню или повторного сканирования.

### **2.4. Окно "Инвентаризация"**
Содержит три кнопки:
- **На основе JSON** — загрузка и обработка инвентаризационных данных из JSON-файла.
- **Пользователь создает самостоятельно** — ручной ввод данных.
- **Утвержденный формат** — выбор из предустановленных форматов инвентаризации.

### **2.5. Окно "Отправить"**
Содержит две кнопки:
- **Excel** — экспорт данных в формат Excel.
- **1С** — экспорт данных в формат, совместимый с 1С.

---

## **3. Архитектура приложения**

- Используется архитектура **MVVM (Model-View-ViewModel)**.
  - **Model** — слой данных, работа с QR-кодами, сохранение, загрузка, экспорт.
  - **View** — UI-компоненты (Activity, Fragment).
  - **ViewModel** — логика отображения, взаимодействие между View и Model, обработка пользовательских действий.

---

## **4. Технологии и инструменты**

- **Язык программирования:** Java.
- **Платформа:** Android (API 21+ рекомендуется).
- **Библиотека для сканирования QR-кодов:** ZXing или ML Kit.
- **Фреймворки для архитектуры:** Android Architecture Components (LiveData, ViewModel, Repository).
- **Экспорт в Excel:** использование библиотеки Apache POI.
- **Формат 1С:** определение структуры обмена данными (при необходимости).

---

## **5. Нефункциональные требования**

- Приложение должно корректно работать при разных разрешениях экрана.
- Поддержка вращения экрана.
- Обработка ошибок (камера недоступна, отсутствие разрешений и т.д.).
- Возможность подробного логирования (отладочные сообщения по требованию пользователя).

---

## **6. Схемы окон приложения**

### **Окно 1: Главное меню**
```
┌─────────────────────────────────┐
│         Главное меню            │
├─────────────────────────────────┤
│                                 │
│        [ Прочитать ]            │
│                                 │
│      [ Инвентаризация ]         │
│                                 │
│        [ Отправить ]            │
│                                 │
└─────────────────────────────────┘
```

---

### **Окно 2: Прочитать (сканирование QR-кода)**

```
┌─────────────────────────────────┐
│         Сканирование QR         │
├─────────────────────────────────┤
│        [ Область сканирования ] │
│                                 │
│ [ Зум ] [ Фонарик ] [ Камера ]  │
│                                 │
│ [ Обычный режим ] [ Пакетный ]  │
│                                 │
│    [ Назад ] [ Список кодов ]   │
└─────────────────────────────────┘
```

---

### **Окно 3: Список отсканированных данных**

```
┌─────────────────────────────────┐
│    Отсканированные QR-коды      │
├─────────────────────────────────┤
│  • QR-код: ABC123               │
│  • QR-код: XYZ789               │
│  • QR-код: 123456               │
│  ... (список с прокруткой)      │
│                                 │
│    [ Удалить ] [ Повтор ]       │
│                                 │
│         [ Назад ]               │
└─────────────────────────────────┘
```

---

### **Окно 4: Инвентаризация**

```
┌─────────────────────────────────┐
│        Инвентаризация           │
├─────────────────────────────────┤
│                                 │
│ [ На основе JSON ]              │
│                                 │
│ [ Создать вручную ]             │
│                                 │
│ [ Утвержденный формат ]         │
│                                 │
│            [ Назад ]            │
└─────────────────────────────────┘
```

---

### **Окно 5: Отправить**

```
┌─────────────────────────────────┐
│           Отправить             │
├─────────────────────────────────┤
│                                 │
│        [ Excel ]                │
│                                 │
│        [ 1С ]                   │
│                                 │
│            [ Назад ]            │
└─────────────────────────────────┘
```

---

## **7. Поток переходов между окнами**

```
[Главное меню]
      │
      ├── [Прочитать] → [Сканирование QR] → [Список QR-кодов]
      │
      ├── [Инвентаризация] → [Выбор типа инвентаризации]
      │                              │
      │                              ├── [На основе JSON]
      │                              ├── [Создать вручную]
      │                              └── [Утвержденный формат]
      │
      └── [Отправить] → [Выбор формата отправки]
                           │
                           ├── [Excel]
                           └── [1С]
```

---

## **8. Структура проекта (архитектура MVVM)**

```
app/
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── example/
│       │           └── qrscanner/
│       │               ├── ui/
│       │               │   ├── activities/
│       │               │   │   ├── MainActivity.java              // Главное меню
│       │               │   │   ├── ScanActivity.java              // Окно сканирования
│       │               │   │   ├── ListScannedActivity.java       // Список отсканированных
│       │               │   │   ├── InventoryActivity.java         // Окно инвентаризации
│       │               │   │   ├── SendActivity.java              // Окно отправки
│       │               │   │   └── JsonInventoryActivity.java     // Окно для JSON-инвентаризации
│       │               │   │
│       │               │   ├── fragments/
│       │               │   │   ├── ManualInventoryFragment.java   // Создание вручную
│       │               │   │   ├── ApprovedFormatFragment.java    // Утвержденный формат
│       │               │   │   ├── ExcelSendFragment.java         // Отправка в Excel
│       │               │   │   └── OneCFragment.java              // Отправка в 1С
│       │               │   │
│       │               │   ├── viewmodels/
│       │               │   │   ├── MainViewModel.java
│       │               │   │   ├── ScanViewModel.java
│       │               │   │   ├── ListScannedViewModel.java
│       │               │   │   ├── InventoryViewModel.java
│       │               │   │   └── SendViewModel.java
│       │               │   │
│       │               │   └── adapters/
│       │               │       └── ScannedCodesAdapter.java       // Для элемента списка
│       │               │
│       │               ├── data/
│       │               │   ├── repositories/
│       │               │   │   └── QRCodeRepository.java
│       │               │   │
│       │               │   ├── local/
│       │               │   │   ├── QRCodeDatabase.java
│       │               │   │   ├── QRCodeDao.java
│       │               │   │   └── entities/
│       │               │   │       └── QRCodeEntity.java
│       │               │   │
│       │               │   └── remote/
│       │               │       ├── ExcelExportService.java
│       │               │       └── OneCExportService.java
│       │               │
│       │               ├── models/
│       │               │   └── QRCode.java                        // Модель QR-кода
│       │               │
│       │               └── utils/
│       │                   ├── QRCodeScanner.java                 // Логика сканирования
│       │                   ├── CameraHelper.java                  // Управление камерой
│       │                   └── DebugLogger.java                   // Подробные отладочные сообщения
│       │
│       ├── res/
│       │   ├── layout/
│       │   │   ├── activity_main.xml
│       │   │   ├── activity_scan.xml
│       │   │   ├── activity_list_scanned.xml
│       │   │   ├── activity_inventory.xml
│       │   │   ├── activity_send.xml
│       │   │   ├── fragment_manual_inventory.xml
│       │   │   ├── fragment_approved_format.xml
│       │   │   ├── fragment_excel_send.xml
│       │   │   ├── fragment_one_c.xml
│       │   │   └── item_scanned_code.xml                          // Для элемента списка
│       │   │
│       │   ├── values/
│       │   │   ├── strings.xml
│       │   │   └── colors.xml
│       │   │
│       │   └── xml/
│       │       └── provider_paths.xml                             // Для доступа к файлам
│       │
│       └── AndroidManifest.xml
│
├── build.gradle (app)
└── libs/ (если используются внешние библиотеки)
```

---

## **Описание ключевых папок и файлов**

| Папка/Файл | Назначение |
|------------|------------|
| `ui/activities` | Содержит Activity для каждого экрана приложения |
| `ui/fragments` | Содержит фрагменты для динамических частей интерфейса |
| `ui/viewmodels` | Содержит ViewModel-классы, реализующие логику представления |
| `ui/adapters` | Адаптеры для отображения списков (например, QR-кодов) |
| `data/repositories` | Репозитории, управляющие доступом к данным (локальным и удалённым) |
| `data/local` | Локальная база данных (Room) |
| `data/remote` | Сервисы для экспорта данных (Excel, 1С) |
| `models` | Модели данных (например, QRCode) |
| `utils` | Вспомогательные классы (логика сканирования, камеры, логирование) |
| `AndroidManifest.xml` | Определение активити, разрешений (камера, запись, чтение) |

---
